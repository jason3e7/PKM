<html>
<head>
<link href="bootstrap-3.3.7/css/bootstrap.min.css" rel="stylesheet">
<script type="text/javascript" src="jquery-3.1.1.min.js"></script>
</head>
<body>
<div class="container theme-showcase" role="main">
<h1>UTF-8 encode/decode</h1>

<div class="form-group">
  <label for="input">input</label>
  <input type="text" class="form-control" id="input">
</div>
<div class="form-group">
  <label for="output">output:</label>
  <textarea class="form-control" rows="3" id="output"></textarea>
</div>
<button type="button" id="encode" class="btn btn-default">encode</button>
<button type="button" id="decode" class="btn btn-default">decode</button>
</div>
<script type="text/javascript">

String.prototype.StoU = function(){
    var result = "";
    for(var i = 0; i < this.length; i++){
        result += "\\u" + ("000" + this[i].charCodeAt(0).toString(16)).substr(-4);
        //result += ("000" + this[i].charCodeAt(0).toString(16)).substr(-4);
    }
    return result;
};

String.prototype.UtoS = function(){
    var result = "";
	var r = /\\u([\d\w]{4})/gi;
	//var r = /([\d\w]{4})/gi;
	var result = this.replace(r, function (match, grp) {
    	return String.fromCharCode(parseInt(grp, 16)); 
	});
	result = unescape(result);
    return result;
};

$("#encode").click(function() {
	$("#output").val($("#input").val().StoU());
});

$("#decode").click(function() {
	$("#output").val($("#input").val().UtoS());
});

</script>
<script src="bootstrap-3.3.7/js/bootstrap.min.js"></script>
</body>
</html>
